(()=>{var e=document.getElementById("idStatus"),t=(new Choices(e,{searchEnabled:!1}),document.getElementById("idPayment")),n=(new Choices(t,{searchEnabled:!1}),document.getElementById("checkAll"));n&&(n.onclick=function(){for(var e=document.querySelectorAll('.form-check-all input[type="checkbox"]'),t=0;t<e.length;t++)e[t].checked=this.checked,e[t].checked?e[t].closest("tr").classList.add("table-active"):e[t].closest("tr").classList.remove("table-active")});var a={valueNames:["id","customer_name","product_name","date","amount","payment","status"],page:8,pagination:!0,plugins:[ListPagination({left:2,right:2})]},l=new List("orderList",a).on("updated",(function(e){0==e.matchingItems.length?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=1==e.i,n=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),n&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=8?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",8==e.matchingItems.length&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"}));isCount=(new DOMParser).parseFromString(l.items.slice(-1)[0]._values.id,"text/html");var d=isCount.body.firstElementChild.innerHTML,i=document.getElementById("orderId"),s=document.getElementById("customername-field"),o=document.getElementById("productname-field"),c=document.getElementById("date-field"),r=document.getElementById("amount-field"),u=document.getElementById("payment-field"),m=document.getElementById("delivered-status"),y=document.getElementById("add-btn"),g=document.getElementById("edit-btn"),p=document.getElementsByClassName("remove-item-btn"),v=document.getElementsByClassName("edit-item-btn");function h(e){var t=e;l.filter((function(e){matchData=(new DOMParser).parseFromString(e.values().status,"text/html");var n=matchData.body.firstElementChild.innerHTML;return"All"==n||"All"==t||n==t})),l.update()}k(),h("All"),document.querySelectorAll('a[data-bs-toggle="tab"]').forEach((function(e){e.addEventListener("shown.bs.tab",(function(e){h(e.target.id)}))})),document.getElementById("showModal").addEventListener("show.bs.modal",(function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Order",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").style.display="none",document.getElementById("edit-btn").style.display="block"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("modal-id").style.display="none",document.getElementById("exampleModalLabel").innerHTML="Add Order",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("edit-btn").style.display="none",document.getElementById("add-btn").style.display="block"):(document.getElementById("exampleModalLabel").innerHTML="List Order",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")})),S(),document.getElementById("showModal").addEventListener("hidden.bs.modal",(function(){w()})),document.querySelector("#orderList").addEventListener("click",(function(){k(),S()}));var E=document.getElementById("orderTable");E.getElementsByTagName("tr"),E.querySelectorAll(".list tr");var f=Number(d.replace(/[^0-9]/g,""))+1;y.addEventListener("click",(function(e){""!==s.value&&""!==o.value&&""!==c.value&&""!==r.value&&""!==u.value&&(l.add({id:'<a href="apps-ecommerce-order-details.html" class="fw-medium link-primary">#VZ'+f+"</a>",customer_name:s.value,product_name:o.value,date:c.value,amount:"$"+r.value,payment:u.value,status:L(m.value)}),document.getElementById("close-modal").click(),w(),k(),h("All"),f++)})),g.addEventListener("click",(function(e){document.getElementById("exampleModalLabel").innerHTML="Edit Order",l.get({id:i.value}).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html"),isid.body.firstElementChild.innerHTML==itemId&&e.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+i.value+"</a>",customer_name:s.value,product_name:o.value,date:c.value.slice(0,14)+'<small class="text-muted">'+c.value.slice(14,22),amount:r.value,payment:u.value,status:L(m.value)})})),document.getElementById("close-modal").click(),w()}));var b=new Choices(u),I=new Choices(m),B=new Choices(o);function L(e){switch(e){case"Delivered":return'<span class="badge badge-soft-success text-uppercase">'+e+"</span>";case"Cancelled":return'<span class="badge badge-soft-danger text-uppercase">'+e+"</span>";case"Inprogress":return'<span class="badge badge-soft-secondary text-uppercase">'+e+"</span>";case"Pickups":return'<span class="badge badge-soft-info text-uppercase">'+e+"</span>";case"Returns":return'<span class="badge badge-soft-primary text-uppercase">'+e+"</span>";case"Pending":return'<span class="badge badge-soft-warning text-uppercase">'+e+"</span>"}}function S(){document.getElementsByName("checkAll").forEach((function(e){e.addEventListener("click",(function(e){e.target.checked?e.target.closest("tr").classList.add("table-active"):e.target.closest("tr").classList.remove("table-active")}))}))}function k(){p.forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText,l.get({id:itemId}).forEach((function(e){deleteid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=deleteid.body.firstElementChild;deleteid.body.firstElementChild.innerHTML==itemId&&document.getElementById("delete-record").addEventListener("click",(function(){l.remove("id",t.outerHTML),document.getElementById("deleteOrder").click()}))}))}))})),v.forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText,l.get({id:itemId}).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=isid.body.firstElementChild.innerHTML;if(t==itemId){i.value=t,s.value=e._values.customer_name,o.value=e._values.product_name,c.value=e._values.date,r.value=e._values.amount,b&&b.destroy(),b=new Choices(u,{searchEnabled:!1});var n=e._values.payment;b.setChoiceByValue(n),B&&B.destroy(),B=new Choices(o,{searchEnabled:!1});var a=e._values.product_name;B.setChoiceByValue(a),I&&I.destroy(),I=new Choices(m,{searchEnabled:!1}),val=(new DOMParser).parseFromString(e._values.status,"text/html");var l=val.body.firstElementChild.innerHTML;I.setChoiceByValue(l),flatpickr("#date-field",{enableTime:!0,dateFormat:"d M, Y, h:i K",defaultDate:e._values.date})}}))}))}))}function w(){s.value="",o.value="",c.value="",r.value="",u.value="",b&&b.destroy(),b=new Choices(u),B&&B.destroy(),B=new Choices(o),I&&I.destroy(),I=new Choices(m)}document.querySelector(".pagination-next").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click())})),document.querySelector(".pagination-prev").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click())}))})();